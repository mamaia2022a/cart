{"version":3,"sources":["webpack:///src/app/pages/sefgrup/gestgrup/vizualizgrup/vizualizgrup.page.ts","webpack:///src/app/pages/sefgrup/gestgrup/vizualizgrup/vizualizgrup.page.html","webpack:///src/app/pages/sefgrup/gestgrup/vizualizgrup/vizualizgrup.page.scss","webpack:///src/app/pages/sefgrup/gestgrup/vizualizgrup/vizualizgrup-routing.module.ts","webpack:///src/app/pages/sefgrup/gestgrup/vizualizgrup/vizualizgrup.module.ts"],"names":["VizualizGrupPage","store","navController","platform","storage","frmVizualizGruperea","mesaj","crtgrupact","crtactiune","grupmembri$","grupmembri","infogrup$","memGrupRequestVizualizare","MemGrupRequest_Vizualizare","infogrup","self","this","getLocalStorageData","then","data","get","token","dispatch","subscribe","membriGrup","of","error","console","log","Promise","resolve","value","actiuneid","memMembrugrupId","parentactiuneid","autActiuneId","grupactactiuniid","autGrupactiuniId","subactiuniParams","ActiuneParametri","memMembruGrup","getSelectedMembruGrup","setData","title","userinfo","autUserInfoNume","autUserInfoPrenume","arrmembrigrup","selMembruGrup","idx","crtMembruGrup","valid","memMembruTipRequestSchimbare","MemMembruTipRequest_Schimbare","crtmemtipcod","newmemtipcod","crtmemrolcod","newmemrolcod","selector","template","routes","path","component","VizualizGrupPageRoutingModule","imports","exports","VizualizGrupPageModule","declarations"],"mappings":"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","file":"x","sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\n\r\nimport { IonSelect, NavController, Platform } from '@ionic/angular';\r\nimport { Store } from '@ngxs/store';\r\nimport { Observable, of } from 'rxjs';\r\nimport { Storage } from '@ionic/storage';\r\nimport { MemMembruTipRequest_Schimbare } from '../../../../payloads/mem/MemMembruTipRequest_Schimbare';\r\nimport { AuthAction } from '../../../../core/auth-guard/auth-guard.actions';\r\nimport { MemGrupRequest_Vizualizare } from '../../../../payloads/mem/MemGrupRequest_Vizualizare';\r\nimport { ActiuneParametri } from '../../../../payloads/aut/ActiuneParametri';\r\n\r\n\r\n@Component({\r\n  selector: 'app-vizualizgrup',\r\n  templateUrl: './vizualizgrup.page.html',\r\n  styleUrls: ['./vizualizgrup.page.scss'],\r\n})\r\nexport class VizualizGrupPage implements OnInit {\r\n\r\n  frmVizualizGruperea: FormGroup = new FormGroup(\r\n    {\r\n       mesaj: new FormControl('Trimite Confirmarea Cererii de a deveni Membru',[]),// [Validators.required, Validators.minLength(8), Validators.maxLength(16)]),\r\n    });\r\n  crtgrupact = null;\r\n  crtactiune : any = null;\r\n  loginResponse : any;\r\n  token : string;\r\n  grupmembri$ : Observable<any> = null;\r\n  grupmembri  : any = null;\r\n  infogrup$ : Observable<any> = null;\r\n  memGrupRequestVizualizare : MemGrupRequest_Vizualizare = new MemGrupRequest_Vizualizare();\r\n  infogrup : any = null; //.gruinfogrupp infogrup.membriGrup infogrup.sefGrup infogrup.membru\r\n\r\n  constructor(private store: Store, private navController: NavController, private platform: Platform, private storage: Storage)  \r\n  {\r\n    var self = this;\r\n    //this.storage.remove(\"grupmembri\");\r\n\r\n    //this.confirmsimact = null;\r\n    var self = this;\r\n    this.getLocalStorageData()\r\n            .then(async data =>{\r\n              data = await self.storage.get(\"token\");\r\n              while (data == null) \r\n                data = await this.storage.get(\"token\");\r\n              //---\r\n              self.token = <string>(data);\r\n\r\n              //---------------------------\r\n              var storageResultKey = \"grupmembri\";\r\n              this.store.dispatch(new AuthAction.MemGrupVizualizare(\r\n                                        self.memGrupRequestVizualizare, self.token, storageResultKey)).subscribe(async () => \r\n              {\r\n                //console.log('Call Action Mem Grup Vizualizare: ');\r\n                \r\n                var data = await this.storage.get(storageResultKey);\r\n                while (data == null) \r\n                  data = await this.storage.get(storageResultKey);\r\n                //---\r\n                self.grupmembri = data.membriGrup;\r\n                self.infogrup   = data; \r\n                self.infogrup$   = data; \r\n                self.grupmembri$ = of(data.membriGrup);\r\n          \r\n                var data = await this.storage.get(\"crtgrupact\");\r\n                while (data == null) \r\n                  data = await this.storage.get(\"crtgrupact\");\r\n                //---\r\n                self.crtgrupact = data;\r\n\r\n              },\r\n              error => {\r\n                console.log('Error Calling Action Vizualizare Grup: ' + error);\r\n              }\r\n              );          \r\n              //------------------------\r\n            })\r\n  }\r\n\r\n  getLocalStorageData(){\r\n    var self =this;\r\n    return new Promise(resolve => {\r\n      self.storage.get(\"crtactiune\")\r\n        .then( value => \r\n            { \r\n              self.crtactiune = value;\r\n              console.log(value);\r\n              resolve(value);\r\n            });\r\n            \r\n         });\r\n    }\r\n\r\n  done() {\r\n    /**\r\n    if (this.frmVizualizGrup.valid) {\r\n      console.log(this.frmVizualizGrup.value);\r\n    }*/\r\n  }\r\n\r\n  selectieFaActiune(actiuneid : number) {\r\n      console.log(\"selectie fa actiune : \" + actiuneid);\r\n  }\r\n\r\n  selectieMembruGrup(memMembrugrupId : number) \r\n  {\r\n    console.log(\"selectie membru grup id:\" + memMembrugrupId);\r\n    //this.selDomZonataraid  = event.detail.value; //this.register.get(\"domzonatara\").value;\r\n    var parentactiuneid : number = this.crtactiune.autActiuneId;\r\n    var grupactactiuniid : number = this.crtgrupact.autGrupactiuniId;\r\n    var subactiuniParams = new ActiuneParametri();\r\n    var memMembruGrup = this.getSelectedMembruGrup(memMembrugrupId, this.grupmembri);\r\n    subactiuniParams.setData(memMembruGrup);\r\n    subactiuniParams.title = memMembruGrup.userinfo.autUserInfoNume + \" \" + memMembruGrup.userinfo.autUserInfoPrenume;\r\n    //this.storage.set(\"crtsubactiuniparams\", subactiuniParams);\r\n    //this.storage.set(\"backaction\",\"/sefgrup/gestgrup/vizualizgrup\");\r\n    var backaction = \"/sefgrup/gestgrup/vizualizgrup\";\r\n    this.store.dispatch(new AuthAction.ActiuneSubactiuni(parentactiuneid, grupactactiuniid, this.crtgrupact, \r\n                        subactiuniParams, backaction));\r\n  }\r\n\r\n\r\n  getSelectedMembruGrup(memMembrugrupId : number, arrmembrigrup : any) : any\r\n  {\r\n    var selMembruGrup = null;\r\n    //var crtMembruGrup = null;\r\n    for (let idx in arrmembrigrup)\r\n    {\r\n      var crtMembruGrup = arrmembrigrup[idx];\r\n      if (crtMembruGrup.memMembrugrupId == memMembrugrupId)\r\n      {\r\n        selMembruGrup = crtMembruGrup;\r\n        break;\r\n      }\r\n    }\r\n    return selMembruGrup;\r\n  }\r\n\r\n\r\n  onVizualizGruperea() {\r\n    if (this.frmVizualizGruperea.valid) \r\n    {\r\n      console.log(this.frmVizualizGruperea.value);\r\n      var memMembruTipRequestSchimbare : MemMembruTipRequest_Schimbare = new MemMembruTipRequest_Schimbare();\r\n      //---\r\n      memMembruTipRequestSchimbare.crtmemtipcod = \"MEMINCNFL\";\r\n\t    memMembruTipRequestSchimbare.newmemtipcod = \"MEMACTNFL\";\r\n      //---\r\n\t    memMembruTipRequestSchimbare.crtmemrolcod = \"MEMINCNFL\";\r\n\t    memMembruTipRequestSchimbare.newmemrolcod = \"MEMACTNFL\";\r\n      //---\r\n      this.store.dispatch(new AuthAction.MemMembruTipSchimbare(memMembruTipRequestSchimbare, this.token));\r\n\r\n    }\r\n  }\r\n\r\n  ngOnInit(){\r\n    //this.frmVizualizGrup = new FormControl('', [Validators.required, Validators.email]);\r\n    console.log(this.crtactiune);\r\n  }\r\n}\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"dark\\\">\\r\\n        <ion-buttons slot=\\\"start\\\">\\r\\n          <ion-back-button [text]=\\\"'backButtonTitle' | translate\\\" defaultHref=\\\"/aut/grupactactiuni\\\"></ion-back-button>\\r\\n        </ion-buttons>\\r\\n    <ion-buttons slot=\\\"secondary\\\">\\r\\n      <ion-button>\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"person-circle\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n      <!-- \\r\\n      <ion-button>\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"search\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n      -->\\r\\n    </ion-buttons>\\r\\n    <ion-buttons slot=\\\"primary\\\">\\r\\n      <ion-button color=\\\"danger\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" ios=\\\"ellipsis-horizontal\\\" md=\\\"ellipsis-vertical\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Bine Ai Venit ! &nbsp; &nbsp; &nbsp; </ion-title>\\r\\n  </ion-toolbar>  \\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n   \\r\\n  <!-- List of Text Items -->\\r\\n      <ng-container *ngIf=\\\"crtactiune\\\">\\r\\n        <h3>{{crtactiune.autActiuneDisplaynume}}</h3>\\r\\n     </ng-container>\\r\\n    <!-- \\r\\n     <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col class=\\\"ion-text-center\\\" size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n          <form [formGroup]=\\\"frmVizualizGruperea\\\" (ngSubmit)=\\\"onVizualizGruperea()\\\">\\r\\n            <ion-card color=\\\"light\\\" class=\\\"auth-card ion-margin\\\">\\r\\n              <ion-item color=\\\"light\\\" class=\\\"ion-no-inner-padding-end\\\">\\r\\n                <ion-input type=\\\"text\\\" [readonly]=\\\"true\\\" placeholder=\\\"Trimite Confirmarea pentru a deveni Membru Activ Neafiliat\\\" formControlName=\\\"mesaj\\\"></ion-input>\\r\\n              </ion-item>\\r\\n            </ion-card>\\r\\n  \\r\\n            <ion-button\\r\\n              expand=\\\"block\\\"\\r\\n              class=\\\"ion-margin-start ion-margin-end ion-margin-bottom\\\"\\r\\n              type=\\\"submit\\\"\\r\\n              [disabled]=\\\"!frmVizualizGruperea.valid\\\"\\r\\n            >\\r\\n              Confirmare Cerere Membru Activ\\r\\n            </ion-button>\\r\\n            <span class=\\\"ion-margin\\\"></span>\\r\\n          </form>\\r\\n  \\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  -->\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col class=\\\"ion-text-center\\\" size-md=\\\"6\\\" size-lg=\\\"5\\\" size-xs=\\\"12\\\">\\r\\n    <ng-container *ngIf=\\\"grupmembri$\\\">\\r\\n      \\r\\n        <ng-container *ngIf=\\\"infogrup$\\\">\\r\\n        <ion-item color=\\\"light\\\" class=\\\"ion-no-inner-padding-end\\\">\\r\\n          <ion-input type=\\\"text\\\" value=\\\"Nume Grup: {{infogrup.grup.memGrupNume}}\\\" [readonly]=\\\"true\\\"></ion-input>\\r\\n          \\r\\n        </ion-item>\\r\\n        <ion-item color=\\\"light\\\" class=\\\"ion-no-inner-padding-end\\\">\\r\\n          <ion-input type=\\\"text\\\" value=\\\"Grup Cod Unic: {{infogrup.grup.memGrupCodunic}}\\\" [readonly]=\\\"true\\\"></ion-input>\\r\\n          \\r\\n        </ion-item>\\r\\n        <ion-item color=\\\"light\\\" class=\\\"ion-no-inner-padding-end\\\">\\r\\n          <ion-input type=\\\"text\\\" value=\\\"Șef Grup: {{infogrup.sefGrup.userinfo.autUserInfoNume}} {{infogrup.sefGrup.userinfo.autUserInfoPrenume}}\\\" [readonly]=\\\"true\\\"></ion-input>\\r\\n          \\r\\n        </ion-item>\\r\\n      </ng-container>\\r\\n        <ion-list>\\r\\n          <ion-item>Componența:</ion-item>\\r\\n          <ion-item button=\\\"true\\\" detail *ngFor='let grupmembru of (grupmembri$|async); let idx=index;' \\r\\n                                        (click)=\\\"selectieMembruGrup(grupmembru.memMembrugrupId)\\\">\\r\\n            <ion-label>\\r\\n              <h2>{{idx+1}}. {{grupmembru.userinfo.autUserInfoNume}} {{grupmembru.userinfo.autUserInfoPrenume}}</h2>\\r\\n              <p>Nume utilizator: {{grupmembru.memMembrugrupUsernume}}</p>\\r\\n            </ion-label>\\r\\n          </ion-item>\\r\\n        </ion-list>\\r\\n\\r\\n\\r\\n   </ng-container>\\r\\n</ion-col>\\r\\n</ion-row>\\r\\n</ion-grid>\\r\\n   \\r\\n    <!--\\r\\n      <ng-container *ngIf=\\\"grupmembri$\\\">\\r\\n      <ion-select placeholder=\\\"Membri Grup\\\" formControlName=\\\"selmembrigrup\\\" (ionChange)=\\\"selectieMembruGrup($event)\\\">\\r\\n         <ion-select-option value=\\\"{{grupmembru.memMembrugrupUserid}}\\\" *ngFor='let grupmembru of (grupmembri$|async)'>{{grupmembru.memMembrugrupUsernume}}</ion-select-option>\\r\\n    </ion-select>\\r\\n    </ng-container>              \\r\\n  -->\\r\\n\\r\\n</ion-content>\\r\\n\";","export default \"\";","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { VizualizGrupPage } from './vizualizgrup.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: VizualizGrupPage,\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class VizualizGrupPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { SharedModule } from '../../.././../shared/shared.module';\r\nimport { VizualizGrupPage } from './vizualizgrup.page';\r\nimport { VizualizGrupPageRoutingModule } from './vizualizgrup-routing.module';\r\n\r\n@NgModule({\r\n  imports: [CommonModule, FormsModule, IonicModule, VizualizGrupPageRoutingModule, SharedModule],\r\n  declarations: [VizualizGrupPage],\r\n})\r\nexport class VizualizGrupPageModule {}\r\n"]}