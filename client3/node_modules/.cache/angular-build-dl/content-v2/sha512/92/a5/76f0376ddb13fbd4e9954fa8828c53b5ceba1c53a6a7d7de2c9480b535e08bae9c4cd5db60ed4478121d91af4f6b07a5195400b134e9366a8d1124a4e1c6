!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var i=0;i<n.length;i++){var t=n[i];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}(self.webpackChunkion_tk_social_network=self.webpackChunkion_tk_social_network||[]).push([[3363],{23363:function(i,t,o){"use strict";o.r(t),o.d(t,{MessagesPageModule:function(){return L}});var r=o(61116),s=o(75425),a=o(6921),c=o(57476),l=o(39238),u=o(64762),g=o(31041),f=o(74249),m=o(61071),p=o(9153),h=o(18995),d=o(30519),Z=o(49536),w=o(33316),v=o(85649);function x(e,n){1&e&&(w.TgZ(0,"ion-title"),w._uU(1),w.ALo(2,"translate"),w._UZ(3,"ion-icon",13),w.qZA()),2&e&&(w.xp6(1),w.hij(" ",w.lcZ(2,1,"bottomTabs.messages")," "))}function b(e,n){if(1&e){var i=w.EpF();w.TgZ(0,"ion-searchbar",14),w.NdJ("ionCancel",function(){return w.CHM(i),w.oxw().showSearchbar=!1}),w.ALo(1,"translate"),w.qZA()}if(2&e){var t=w.oxw();w.Q6J("formControl",t.searchMessageList)("placeholder",w.lcZ(1,2,"messagesSearchTitle"))}}function k(e,n){if(1&e){var i=w.EpF();w.TgZ(0,"ion-button",15),w.NdJ("click",function(){return w.CHM(i),w.oxw().showSearchbar=!0}),w._UZ(1,"ion-icon",16),w.qZA()}}function A(e,n){1&e&&(w.TgZ(0,"ion-button",17),w._UZ(1,"ion-icon",18),w.qZA())}function T(e,n){if(1&e&&(w._UZ(0,"ion-searchbar",19),w.ALo(1,"translate")),2&e){var i=w.oxw();w.Q6J("formControl",i.searchMessageList)("placeholder",w.lcZ(1,2,"messagesSearchTitle"))}}function q(e,n){1&e&&(w.TgZ(0,"ion-item"),w.TgZ(1,"ion-avatar",20),w._UZ(2,"ion-skeleton-text",21),w.qZA(),w.TgZ(3,"ion-label"),w.TgZ(4,"h2"),w._UZ(5,"ion-skeleton-text",22),w.qZA(),w.TgZ(6,"p"),w._UZ(7,"ion-skeleton-text",23),w.qZA(),w.qZA(),w.qZA())}function y(e,n){1&e&&w._UZ(0,"ion-icon",36)}function I(e,n){if(1&e){var i=w.EpF();w.TgZ(0,"ion-item-option",37),w.NdJ("click",function(){w.CHM(i);var e=w.oxw(2).$implicit;return w.oxw().pinMessage(e.id)}),w._UZ(1,"ion-icon",38),w.TgZ(2,"ion-label"),w._uU(3," Pin "),w.qZA(),w.qZA()}}function M(e,n){if(1&e){var i=w.EpF();w.TgZ(0,"ion-item-option",37),w.NdJ("click",function(){w.CHM(i);var e=w.oxw(2).$implicit;return w.oxw().unPinMessage(e.id)}),w._UZ(1,"ion-icon",39),w.TgZ(2,"ion-label"),w._uU(3," UnPin "),w.qZA(),w.qZA()}}function _(e,n){if(1&e){var i=w.EpF();w.ynx(0),w.TgZ(1,"ion-item",24),w.NdJ("click",function(){w.CHM(i);var e=w.oxw().$implicit;return w.oxw().openMessageDetail(e)}),w.TgZ(2,"ion-avatar",20),w._UZ(3,"img",25),w.qZA(),w.TgZ(4,"ion-label"),w.TgZ(5,"h2"),w._uU(6),w.qZA(),w.TgZ(7,"p"),w._uU(8),w.qZA(),w.qZA(),w.YNc(9,y,1,0,"ion-icon",26),w.qZA(),w.TgZ(10,"ion-item-options",27),w.TgZ(11,"ion-item-option",28),w._UZ(12,"ion-icon",29),w.TgZ(13,"ion-label"),w._uU(14," Not readed "),w.qZA(),w.qZA(),w.YNc(15,I,4,0,"ion-item-option",30),w.YNc(16,M,4,0,"ion-item-option",30),w.qZA(),w.TgZ(17,"ion-item-options",31),w.TgZ(18,"ion-item-option",32),w._UZ(19,"ion-icon",33),w.TgZ(20,"ion-label"),w._uU(21," Mute "),w.qZA(),w.qZA(),w.TgZ(22,"ion-item-option",34),w._UZ(23,"ion-icon",35),w.TgZ(24,"ion-label"),w._uU(25," Delete "),w.qZA(),w.qZA(),w.qZA(),w.BQk()}if(2&e){var t=w.oxw(),o=t.$implicit,r=t.ngForOf,s=t.index;w.xp6(1),w.Q6J("lines",o.isPin?r[s+1].isPin?"none":"full":"none"),w.xp6(2),w.Q6J("src",o.avatar,w.LSH),w.xp6(3),w.AsE("",o.firstName," ",o.lastName,""),w.xp6(2),w.Oqu(o.lastMessage),w.xp6(1),w.Q6J("ngIf",o.isPin),w.xp6(6),w.Q6J("ngIf",!o.isPin),w.xp6(1),w.Q6J("ngIf",o.isPin)}}function J(e,n){if(1&e&&(w.TgZ(0,"ion-item-sliding"),w.YNc(1,q,8,0,"ion-item",1),w.YNc(2,_,26,8,"ng-container",1),w.qZA()),2&e){var i=n.$implicit;w.xp6(1),w.Q6J("ngIf",i.skeleton),w.xp6(1),w.Q6J("ngIf",!i.skeleton)}}function C(e,n){1&e&&(w.TgZ(0,"div",40),w.TgZ(1,"p"),w._uU(2,"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),w.qZA(),w.qZA())}var U,N,Q=[{path:"",component:(U=function(){function i(n,t,o){e(this,i),this.store=n,this.config=t,this.navController=o,this.searchMessageList=new g.NI(""),this.showSearchbar=!1,this.isIos=!1,this.isIos="ios"===this.config.get("mode")}var t,o,r;return t=i,(o=[{key:"trackByMessages",value:function(e){return e}},{key:"doRefresh",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return this.searchMessageList.setValue("",{emitEvent:!1}),n.next=3,(0,p.n)(this.store.dispatch(new d.qK.FetchMessages(this.searchMessageList.value)));case 3:setTimeout(function(){e.target.complete()});case 4:case"end":return n.stop()}},n,this)}))}},{key:"openMessageDetail",value:function(e){this.navController.navigateForward("/message-detail/".concat(e.id))}},{key:"pinMessage",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.n)(this.store.dispatch(new d.vm(e)));case 2:return n.next=4,this.ionItemSliding.closeOpened();case 4:case"end":return n.stop()}},n,this)}))}},{key:"unPinMessage",value:function(e){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,p.n)(this.store.dispatch(new d.nZ(e)));case 2:return n.next=4,this.ionItemSliding.closeOpened();case 4:case"end":return n.stop()}},n,this)}))}},{key:"ngOnInit",value:function(){return(0,u.mG)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.n)(this.store.dispatch(new d.qK.FetchMessages(this.searchMessageList.value)));case 2:this.searchMessageList.valueChanges.pipe((0,h.b)(300)).subscribe(function(e){n.store.dispatch(new d.qK.FetchMessages(e))});case 3:case"end":return e.stop()}},e,this)}))}},{key:"ionViewDidEnter",value:function(){}},{key:"ionViewDidLeave",value:function(){}}])&&n(t.prototype,o),r&&n(t,r),i}(),U.\u0275fac=function(e){return new(e||U)(w.Y36(m.yh),w.Y36(f.De),w.Y36(f.SH))},U.\u0275cmp=w.Xpm({type:U,selectors:[["app-messages"]],viewQuery:function(e,n){var i;1&e&&(w.Gf(f.W2,5),w.Gf(f.td,5)),2&e&&(w.iGM(i=w.CRH())&&(n.ionContent=i.first),w.iGM(i=w.CRH())&&(n.ionItemSliding=i.first))},decls:17,vars:16,consts:[[3,"translucent"],[4,"ngIf"],["showCancelButton","always","cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder","ionCancel",4,"ngIf"],["slot","end"],["color","primary",3,"click",4,"ngIf"],["color","primary",4,"ngIf"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down-outline"],["cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder",4,"ngIf"],["lines","none",1,"ion-padding-bottom"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","ion-margin ion-text-center",4,"ngIf"],["name","chevron-down-outline","color","primary",1,"message-icon-middle"],["showCancelButton","always","cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder","ionCancel"],["color","primary",3,"click"],["slot","icon-only","name","search-outline"],["color","primary"],["slot","icon-only","name","create-outline"],["cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder"],["slot","start"],["animated","",2,"border-radius","50%"],["animated","",2,"width","50%"],["animated","",2,"width","80%"],["button","","detail","false",3,"lines","click"],[3,"src"],["name","arrow-up-circle-outline","slot","end",4,"ngIf"],["side","start"],["color","primary","expandable",""],["slot","start","name","chatbubble-ellipses-outline"],["color","medium",3,"click",4,"ngIf"],["side","end"],["color","medium"],["slot","start","name","volume-mute-outline"],["color","danger","expandable",""],["slot","start","name","trash-outline"],["name","arrow-up-circle-outline","slot","end"],["color","medium",3,"click"],["slot","start","name","arrow-up-circle-outline"],["slot","start","name","arrow-down-circle-outline"],[1,"ion-margin","ion-text-center"]],template:function(e,n){1&e&&(w.TgZ(0,"ion-header",0),w.TgZ(1,"ion-toolbar"),w.YNc(2,x,4,3,"ion-title",1),w.YNc(3,b,2,4,"ion-searchbar",2),w.TgZ(4,"ion-buttons",3),w.YNc(5,k,2,0,"ion-button",4),w.YNc(6,A,2,0,"ion-button",5),w.qZA(),w.qZA(),w.qZA(),w.TgZ(7,"ion-content",6),w.TgZ(8,"ion-refresher",7),w.NdJ("ionRefresh",function(e){return n.doRefresh(e)}),w._UZ(9,"ion-refresher-content",8),w.qZA(),w.YNc(10,T,2,4,"ion-searchbar",9),w.TgZ(11,"ion-list",10),w.YNc(12,J,3,2,"ion-item-sliding",11),w.ALo(13,"async"),w.qZA(),w.YNc(14,C,3,0,"div",12),w.ALo(15,"async"),w.ALo(16,"async"),w.qZA()),2&e&&(w.Q6J("translucent",!0),w.xp6(2),w.Q6J("ngIf",!n.showSearchbar),w.xp6(1),w.Q6J("ngIf",n.showSearchbar),w.xp6(2),w.Q6J("ngIf",!n.isIos&&!n.showSearchbar),w.xp6(1),w.Q6J("ngIf",!n.showSearchbar),w.xp6(1),w.Q6J("fullscreen",!0),w.xp6(3),w.Q6J("ngIf",n.isIos),w.xp6(2),w.Q6J("ngForOf",w.lcZ(13,10,n.messages$))("ngForTrackBy",n.trackByMessages),w.xp6(2),w.Q6J("ngIf",!w.lcZ(15,12,n.loadingMessagesStates$).isLoading&&!w.lcZ(16,14,n.messages$).length))},directives:[f.Gu,f.sr,r.O5,f.Sm,f.W2,f.nJ,f.Wo,f.q_,r.sg,f.wd,f.gu,f.VI,f.j9,g.JJ,g.oH,f.YG,f.td,f.Ie,f.BJ,f.CK,f.Q$,f.IK,f.u8],pipes:[r.Ov,v.X$],styles:[".message-icon-middle[_ngcontent-%COMP%]{vertical-align:middle}"]}),(0,u.gn)([(0,m.Ph)((0,m.P1)([Z.fU],function(e){return e.messages.isLoading?Array(10).fill({skeleton:!0}):e.messages.listData.slice().sort(function(e,n){return+n.isPin-+e.isPin})}))],U.prototype,"messages$",void 0),(0,u.gn)([(0,m.Ph)((0,m.P1)([Z.fU],function(e){return{isLoading:e.messages.isLoading,isSuccess:e.messages.isSuccess,isFailed:e.messages.isFailed}}))],U.prototype,"loadingMessagesStates$",void 0),U)}],S=function(){var n=function n(){e(this,n)};return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[[l.Bz.forChild(Q)],l.Bz]}),n}(),L=((N=function n(){e(this,n)}).\u0275fac=function(e){return new(e||N)},N.\u0275mod=w.oAB({type:N}),N.\u0275inj=w.cJS({imports:[[r.ez,S,a.H,c.i,s.m]]}),N)}}])}();