(self.webpackChunkion_tk_social_network=self.webpackChunkion_tk_social_network||[]).push([[3363],{23363:function(n,e,i){"use strict";i.r(e),i.d(e,{MessagesPageModule:function(){return U}});var o=i(61116),t=i(75425),s=i(6921),a=i(57476),c=i(39238),r=i(64762),l=i(31041),g=i(74249),u=i(61071),d=i(9153),m=i(18995),p=i(30519),f=i(49536),h=i(33316),Z=i(85649);function w(n,e){1&n&&(h.TgZ(0,"ion-title"),h._uU(1),h.ALo(2,"translate"),h._UZ(3,"ion-icon",13),h.qZA()),2&n&&(h.xp6(1),h.hij(" ",h.lcZ(2,1,"bottomTabs.messages")," "))}function A(n,e){if(1&n){const n=h.EpF();h.TgZ(0,"ion-searchbar",14),h.NdJ("ionCancel",function(){return h.CHM(n),h.oxw().showSearchbar=!1}),h.ALo(1,"translate"),h.qZA()}if(2&n){const n=h.oxw();h.Q6J("formControl",n.searchMessageList)("placeholder",h.lcZ(1,2,"messagesSearchTitle"))}}function b(n,e){if(1&n){const n=h.EpF();h.TgZ(0,"ion-button",15),h.NdJ("click",function(){return h.CHM(n),h.oxw().showSearchbar=!0}),h._UZ(1,"ion-icon",16),h.qZA()}}function T(n,e){1&n&&(h.TgZ(0,"ion-button",17),h._UZ(1,"ion-icon",18),h.qZA())}function q(n,e){if(1&n&&(h._UZ(0,"ion-searchbar",19),h.ALo(1,"translate")),2&n){const n=h.oxw();h.Q6J("formControl",n.searchMessageList)("placeholder",h.lcZ(1,2,"messagesSearchTitle"))}}function x(n,e){1&n&&(h.TgZ(0,"ion-item"),h.TgZ(1,"ion-avatar",20),h._UZ(2,"ion-skeleton-text",21),h.qZA(),h.TgZ(3,"ion-label"),h.TgZ(4,"h2"),h._UZ(5,"ion-skeleton-text",22),h.qZA(),h.TgZ(6,"p"),h._UZ(7,"ion-skeleton-text",23),h.qZA(),h.qZA(),h.qZA())}function I(n,e){1&n&&h._UZ(0,"ion-icon",36)}function y(n,e){if(1&n){const n=h.EpF();h.TgZ(0,"ion-item-option",37),h.NdJ("click",function(){h.CHM(n);const e=h.oxw(2).$implicit;return h.oxw().pinMessage(e.id)}),h._UZ(1,"ion-icon",38),h.TgZ(2,"ion-label"),h._uU(3," Pin "),h.qZA(),h.qZA()}}function k(n,e){if(1&n){const n=h.EpF();h.TgZ(0,"ion-item-option",37),h.NdJ("click",function(){h.CHM(n);const e=h.oxw(2).$implicit;return h.oxw().unPinMessage(e.id)}),h._UZ(1,"ion-icon",39),h.TgZ(2,"ion-label"),h._uU(3," UnPin "),h.qZA(),h.qZA()}}function v(n,e){if(1&n){const n=h.EpF();h.ynx(0),h.TgZ(1,"ion-item",24),h.NdJ("click",function(){h.CHM(n);const e=h.oxw().$implicit;return h.oxw().openMessageDetail(e)}),h.TgZ(2,"ion-avatar",20),h._UZ(3,"img",25),h.qZA(),h.TgZ(4,"ion-label"),h.TgZ(5,"h2"),h._uU(6),h.qZA(),h.TgZ(7,"p"),h._uU(8),h.qZA(),h.qZA(),h.YNc(9,I,1,0,"ion-icon",26),h.qZA(),h.TgZ(10,"ion-item-options",27),h.TgZ(11,"ion-item-option",28),h._UZ(12,"ion-icon",29),h.TgZ(13,"ion-label"),h._uU(14," Not readed "),h.qZA(),h.qZA(),h.YNc(15,y,4,0,"ion-item-option",30),h.YNc(16,k,4,0,"ion-item-option",30),h.qZA(),h.TgZ(17,"ion-item-options",31),h.TgZ(18,"ion-item-option",32),h._UZ(19,"ion-icon",33),h.TgZ(20,"ion-label"),h._uU(21," Mute "),h.qZA(),h.qZA(),h.TgZ(22,"ion-item-option",34),h._UZ(23,"ion-icon",35),h.TgZ(24,"ion-label"),h._uU(25," Delete "),h.qZA(),h.qZA(),h.qZA(),h.BQk()}if(2&n){const n=h.oxw(),e=n.$implicit,i=n.ngForOf,o=n.index;h.xp6(1),h.Q6J("lines",e.isPin?i[o+1].isPin?"none":"full":"none"),h.xp6(2),h.Q6J("src",e.avatar,h.LSH),h.xp6(3),h.AsE("",e.firstName," ",e.lastName,""),h.xp6(2),h.Oqu(e.lastMessage),h.xp6(1),h.Q6J("ngIf",e.isPin),h.xp6(6),h.Q6J("ngIf",!e.isPin),h.xp6(1),h.Q6J("ngIf",e.isPin)}}function M(n,e){if(1&n&&(h.TgZ(0,"ion-item-sliding"),h.YNc(1,x,8,0,"ion-item",1),h.YNc(2,v,26,8,"ng-container",1),h.qZA()),2&n){const n=e.$implicit;h.xp6(1),h.Q6J("ngIf",n.skeleton),h.xp6(1),h.Q6J("ngIf",!n.skeleton)}}function _(n,e){1&n&&(h.TgZ(0,"div",40),h.TgZ(1,"p"),h._uU(2,"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"),h.qZA(),h.qZA())}const J=[{path:"",component:(()=>{class n{constructor(n,e,i){this.store=n,this.config=e,this.navController=i,this.searchMessageList=new l.NI(""),this.showSearchbar=!1,this.isIos=!1,this.isIos="ios"===this.config.get("mode")}trackByMessages(n){return n}doRefresh(n){return(0,r.mG)(this,void 0,void 0,function*(){this.searchMessageList.setValue("",{emitEvent:!1}),yield(0,d.n)(this.store.dispatch(new p.qK.FetchMessages(this.searchMessageList.value))),setTimeout(()=>{n.target.complete()})})}openMessageDetail(n){this.navController.navigateForward(`/message-detail/${n.id}`)}pinMessage(n){return(0,r.mG)(this,void 0,void 0,function*(){yield(0,d.n)(this.store.dispatch(new p.vm(n))),yield this.ionItemSliding.closeOpened()})}unPinMessage(n){return(0,r.mG)(this,void 0,void 0,function*(){yield(0,d.n)(this.store.dispatch(new p.nZ(n))),yield this.ionItemSliding.closeOpened()})}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){yield(0,d.n)(this.store.dispatch(new p.qK.FetchMessages(this.searchMessageList.value))),this.searchMessageList.valueChanges.pipe((0,m.b)(300)).subscribe(n=>{this.store.dispatch(new p.qK.FetchMessages(n))})})}ionViewDidEnter(){}ionViewDidLeave(){}}return n.\u0275fac=function(e){return new(e||n)(h.Y36(u.yh),h.Y36(g.De),h.Y36(g.SH))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-messages"]],viewQuery:function(n,e){if(1&n&&(h.Gf(g.W2,5),h.Gf(g.td,5)),2&n){let n;h.iGM(n=h.CRH())&&(e.ionContent=n.first),h.iGM(n=h.CRH())&&(e.ionItemSliding=n.first)}},decls:17,vars:16,consts:[[3,"translucent"],[4,"ngIf"],["showCancelButton","always","cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder","ionCancel",4,"ngIf"],["slot","end"],["color","primary",3,"click",4,"ngIf"],["color","primary",4,"ngIf"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["pullingIcon","arrow-down-outline"],["cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder",4,"ngIf"],["lines","none",1,"ion-padding-bottom"],[4,"ngFor","ngForOf","ngForTrackBy"],["class","ion-margin ion-text-center",4,"ngIf"],["name","chevron-down-outline","color","primary",1,"message-icon-middle"],["showCancelButton","always","cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder","ionCancel"],["color","primary",3,"click"],["slot","icon-only","name","search-outline"],["color","primary"],["slot","icon-only","name","create-outline"],["cancelButtonIcon","arrow-back-outline",3,"formControl","placeholder"],["slot","start"],["animated","",2,"border-radius","50%"],["animated","",2,"width","50%"],["animated","",2,"width","80%"],["button","","detail","false",3,"lines","click"],[3,"src"],["name","arrow-up-circle-outline","slot","end",4,"ngIf"],["side","start"],["color","primary","expandable",""],["slot","start","name","chatbubble-ellipses-outline"],["color","medium",3,"click",4,"ngIf"],["side","end"],["color","medium"],["slot","start","name","volume-mute-outline"],["color","danger","expandable",""],["slot","start","name","trash-outline"],["name","arrow-up-circle-outline","slot","end"],["color","medium",3,"click"],["slot","start","name","arrow-up-circle-outline"],["slot","start","name","arrow-down-circle-outline"],[1,"ion-margin","ion-text-center"]],template:function(n,e){1&n&&(h.TgZ(0,"ion-header",0),h.TgZ(1,"ion-toolbar"),h.YNc(2,w,4,3,"ion-title",1),h.YNc(3,A,2,4,"ion-searchbar",2),h.TgZ(4,"ion-buttons",3),h.YNc(5,b,2,0,"ion-button",4),h.YNc(6,T,2,0,"ion-button",5),h.qZA(),h.qZA(),h.qZA(),h.TgZ(7,"ion-content",6),h.TgZ(8,"ion-refresher",7),h.NdJ("ionRefresh",function(n){return e.doRefresh(n)}),h._UZ(9,"ion-refresher-content",8),h.qZA(),h.YNc(10,q,2,4,"ion-searchbar",9),h.TgZ(11,"ion-list",10),h.YNc(12,M,3,2,"ion-item-sliding",11),h.ALo(13,"async"),h.qZA(),h.YNc(14,_,3,0,"div",12),h.ALo(15,"async"),h.ALo(16,"async"),h.qZA()),2&n&&(h.Q6J("translucent",!0),h.xp6(2),h.Q6J("ngIf",!e.showSearchbar),h.xp6(1),h.Q6J("ngIf",e.showSearchbar),h.xp6(2),h.Q6J("ngIf",!e.isIos&&!e.showSearchbar),h.xp6(1),h.Q6J("ngIf",!e.showSearchbar),h.xp6(1),h.Q6J("fullscreen",!0),h.xp6(3),h.Q6J("ngIf",e.isIos),h.xp6(2),h.Q6J("ngForOf",h.lcZ(13,10,e.messages$))("ngForTrackBy",e.trackByMessages),h.xp6(2),h.Q6J("ngIf",!h.lcZ(15,12,e.loadingMessagesStates$).isLoading&&!h.lcZ(16,14,e.messages$).length))},directives:[g.Gu,g.sr,o.O5,g.Sm,g.W2,g.nJ,g.Wo,g.q_,o.sg,g.wd,g.gu,g.VI,g.j9,l.JJ,l.oH,g.YG,g.td,g.Ie,g.BJ,g.CK,g.Q$,g.IK,g.u8],pipes:[o.Ov,Z.X$],styles:[".message-icon-middle[_ngcontent-%COMP%]{vertical-align:middle}"]}),(0,r.gn)([(0,u.Ph)((0,u.P1)([f.fU],n=>n.messages.isLoading?Array(10).fill({skeleton:!0}):n.messages.listData.slice().sort((n,e)=>+e.isPin-+n.isPin)))],n.prototype,"messages$",void 0),(0,r.gn)([(0,u.Ph)((0,u.P1)([f.fU],n=>({isLoading:n.messages.isLoading,isSuccess:n.messages.isSuccess,isFailed:n.messages.isFailed})))],n.prototype,"loadingMessagesStates$",void 0),n})()}];let C=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[c.Bz.forChild(J)],c.Bz]}),n})(),U=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[[o.ez,C,s.H,a.i,t.m]]}),n})()}}]);