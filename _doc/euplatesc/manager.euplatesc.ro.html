<!DOCTYPE html>
<!-- saved from url=(0042)https://manager.euplatesc.ro/v3/?page=docs -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="shortcut icon" href="https://manager.euplatesc.ro/v3/view/images/favicon.ico">
		
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/fa.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/bootstrap.min.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/style.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/jquery-confirm.min.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/flatpickr.min.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/nano.min.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/angle-input.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/bars-pill.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/nouislider.min.css">
		<link rel="stylesheet" href="./manager.euplatesc.ro_files/jquery.fancybox.min.css">
		
		<script src="./manager.euplatesc.ro_files/jquery-3.5.1.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/bootstrap.bundle.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/plugins.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/jquery-confirm.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/Chart.bundle.min.js.descărcare"></script><style type="text/css">/* Chart.js */
@-webkit-keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}@keyframes chartjs-render-animation{from{opacity:0.99}to{opacity:1}}.chartjs-render-monitor{-webkit-animation:chartjs-render-animation 0.001s;animation:chartjs-render-animation 0.001s;}</style>
		<script src="./manager.euplatesc.ro_files/flatpickr.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/pickr.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/angle-input.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/jquery.barrating.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/nouislider.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/jquery-ui.min.js.descărcare"></script>
		<script src="./manager.euplatesc.ro_files/jquery.fancybox.min.js.descărcare"></script>
		
		<script>
			if (navigator.userAgent.match(/msie/i) || navigator.userAgent.match(/trident/i) || navigator.userAgent.match(/Edge/i) ){
				$.loadCSS('view/css/iefix.css');
			}
			function MM_openBrWindow(theURL,winName,features) { //v2.0// popup in main si order_list
			  window.open(theURL,winName,features);
			}
		</script>


	</head>
	
	<body>	<div class="container mt-4">

<link rel="stylesheet" href="./manager.euplatesc.ro_files/prism.css">
<script src="./manager.euplatesc.ro_files/prism.js.descărcare"></script>
<style>
	.nav-tabs .nav-item.show .nav-link, .nav-tabs .nav-link.active {
		color: #fff;
		background-color: #2d2d2d;
		border-color: #495057 #495057 #2d2d2d;
	}
	.nav-tabs .nav-link {
		color:#000;
		background-color: #d6d6d6;
		margin-right: 4px;
	}
</style>

<div class="row">
	<div class="col-12">
		<h4>General transaction processing</h4><br>
		<h5>Message Structure - Authorisation Request</h5>
		The following fields set will be posted to EuPlatesc.ro platform through the HTTP POST or GET method (client redirection, or server to server request only if generate_epid is present). The POST request should be made as form data. The set of fields are divided into 2 sections: fields included in digital signature of the message (fp_hash) and fields not included in the digital signature of the message (fp_hash).  
		<br>
		<br>
		<h6>EndPoint: https://secure.euplatesc.ro/tdsprocess/tranzactd.php</h6>
		<br>
		<h6>Fields generated by merchant system and included into the fp_hash</h6>
	</div>
</div>

<div class="row">
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>amount</td><td>Numeric</td><td>1-12</td><td>Order total amount in float format with decimal point (thousand separator not allowed). Ex: 1234.56</td></tr>
				<tr><td>curr</td><td>String</td><td>3</td><td>Order currency: 3-character currency code (RON, USD, EUR)</td></tr>
				<tr><td>invoice_id</td><td>String</td><td>1-32</td><td>Merchant order ID</td></tr>
				<tr><td>order_desc</td><td>String</td><td>1-127</td><td>Order description</td></tr>
				<tr><td>merch_id</td><td>String</td><td>8-50</td><td>Merchant ID assigned by EuPlatesc.ro</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDDHHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs1" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt1-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav1-php" aria-controls="nav1-php" aria-selected="true">PHP</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt1-js" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav1-js" aria-controls="nav1-js" aria-selected="false">nodeJS</a>
			</li>
			<li class="nav-item d-none">
				<a class="nav-link" id="navt1-csharp" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav1-csharp" aria-controls="nav1-csharp" aria-selected="false">C#</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt1-java" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav1-java" aria-controls="nav1-java" aria-selected="false">JAVA</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav1-php" role="tabpanel" aria-labelledby="navt1-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$mid</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'testaccount'</span><span class="token punctuation">;</span>
<span class="token variable">$key</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'00112233445566778899AABBCCDDEEFF'</span><span class="token punctuation">;</span>

<span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'amount'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'1.00'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'curr'</span>        <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'RON'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'invoice_id'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'123'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'order_desc'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Test payment'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'merch_id'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$mid</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'nonce'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token variable">$str</span> <span class="token operator">=</span> <span class="token constant">NULL</span><span class="token punctuation">;</span>
	<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$data</span> <span class="token keyword">as</span> <span class="token variable">$d</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$d</span> <span class="token operator">===</span> <span class="token constant">NULL</span> <span class="token operator">||</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token variable">$str</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token single-quoted-string string">'-'</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token variable">$str</span> <span class="token punctuation">.</span><span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$d</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token variable">$d</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token function">hash_hmac</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'MD5'</span><span class="token punctuation">,</span><span class="token variable">$str</span><span class="token punctuation">,</span> <span class="token function">pack</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'H*'</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
			</div>
			<div class="tab-pane" id="nav1-js" role="tabpanel" aria-labelledby="navt1-js">
				<pre class="m-0 language-js"><code class=" language-js"><span class="token keyword">var</span> crypto<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span>
		<span class="token string">"amount"</span><span class="token operator">:</span><span class="token string">"0.10"</span><span class="token punctuation">,</span>
		<span class="token string">"curr"</span><span class="token operator">:</span><span class="token string">"RON"</span><span class="token punctuation">,</span>
		<span class="token string">"invoice_id"</span><span class="token operator">:</span><span class="token string">"123"</span><span class="token punctuation">,</span>
		<span class="token string">"order_desc"</span><span class="token operator">:</span><span class="token string">"Comanda test"</span><span class="token punctuation">,</span>
		<span class="token string">"merch_id"</span><span class="token operator">:</span><span class="token string">"testaccount"</span><span class="token punctuation">,</span>
		<span class="token string">"timestamp"</span><span class="token operator">:</span><span class="token string">"20181205105150"</span><span class="token punctuation">,</span>
		<span class="token string">"nonce"</span><span class="token operator">:</span><span class="token string">"522d2594b9d65b850aa01dfc4914ea14"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> datakeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> hmac<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>datakeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> binKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> hmacx <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">"md5"</span><span class="token punctuation">,</span> binKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>hmac<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token string">"fp_hash"</span><span class="token punctuation">]</span><span class="token operator">=</span>hmacx<span class="token punctuation">;</span></code></pre>
			</div>
			<div class="tab-pane" id="nav1-csharp" role="tabpanel" aria-labelledby="navt1-charp">
				<pre class="m-0 language-csharp"><code class=" language-csharp"></code></pre>
			</div>
			<div class="tab-pane" id="nav1-java" role="tabpanel" aria-labelledby="navt1-java">
				<pre class="m-0 language-java" style="max-height:660px"><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> ep_demo<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> mid<span class="token operator">=</span><span class="token string">"testaccount"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> key<span class="token operator">=</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dateString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmmss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"100.00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"RON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Order "</span> <span class="token operator">+</span> <span class="token class-name">Long</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">nonceGen</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">fp_hash</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">nonceGen</span><span class="token punctuation">(</span><span class="token keyword">int</span> len<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> <span class="token class-name">AlphaNumericString</span> <span class="token operator">=</span> <span class="token string">"ABCDEF0123456789"</span><span class="token punctuation">;</span>
        <span class="token class-name">StringBuilder</span> sb <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">AlphaNumericString</span><span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token class-name">Math</span><span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
            sb<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token class-name">AlphaNumericString</span><span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        <span class="token punctuation">}</span> 
        <span class="token keyword">return</span> sb<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
     
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token function">hex2byte</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> key<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bkey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span>len <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            bkey<span class="token punctuation">[</span>i <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">digit</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">Character</span><span class="token punctuation">.</span><span class="token function">digit</span><span class="token punctuation">(</span>key<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> bkey<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">//RFC2104HMAC</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">String</span> <span class="token function">fp_hash</span><span class="token punctuation">(</span><span class="token class-name">ArrayList</span> s<span class="token punctuation">,</span> <span class="token class-name">String</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">StringBuffer</span> ret <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuffer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Formatter</span> formatter <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Formatter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    	<span class="token class-name">String</span> t<span class="token punctuation">;</span>
    	<span class="token class-name">Integer</span> l<span class="token punctuation">;</span>
    	<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
    	<span class="token punctuation">{</span>
    		t <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">if</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
    			ret<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token keyword">else</span>
    		<span class="token punctuation">{</span>
    			l <span class="token operator">=</span> t<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    			ret<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>l<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    			ret<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    		<span class="token punctuation">}</span>
    	<span class="token punctuation">}</span>
        <span class="token class-name">String</span> data<span class="token operator">=</span>ret<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span>
        <span class="token punctuation">{</span>
            <span class="token class-name">SecretKeySpec</span> secretKeySpec <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SecretKeySpec</span><span class="token punctuation">(</span><span class="token function">hex2byte</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"HmacMD5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Mac</span> mac <span class="token operator">=</span> <span class="token class-name">Mac</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token string">"HmacMD5"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            mac<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>secretKeySpec<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">byte</span> b <span class="token operator">:</span> mac<span class="token punctuation">.</span><span class="token function">doFinal</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                formatter<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">"%02x"</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">InvalidKeyException</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">NoSuchAlgorithmException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> formatter<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
			</div>
		</div>
	</div>
	
</div>

<div class="row"><div class="col-12"><br><h6>Fields generated by merchant system and NOT included into the fp_hash</h6><br></div></div>
<div class="row">
	<div class="col-lg-6 col-12">
		<h6>Billing details</h6>
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>fname</td><td>String</td><td>1-255</td><td>Client first name</td></tr>
				<tr><td>lname</td><td>String</td><td>1-255</td><td>Client last name</td></tr>
				<tr><td>company</td><td>String</td><td>1-255</td><td>Company data</td></tr>
				<tr><td>add</td><td>String</td><td>1-255</td><td>Client street </td></tr>
				<tr><td>city</td><td>String</td><td>1-255</td><td>Client city</td></tr>
				<tr><td>state</td><td>String</td><td>1-255</td><td>Client state</td></tr>
				<tr><td>zip</td><td>String</td><td>1-25</td><td>Client postal code</td></tr>
				<tr><td>country</td><td>String</td><td>1-55</td><td>Client country</td></tr>
				<tr><td>phone</td><td>String</td><td>1-255</td><td>Client phone number</td></tr>
				<tr><td>email</td><td>String</td><td>1-65</td><td>Client email</td></tr>
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<h6>Shipping Details – if different that billing details </h6>
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>sfname</td><td>String</td><td>1-255</td><td>Client first name</td></tr>
				<tr><td>slname</td><td>String</td><td>1-255</td><td>Client last name</td></tr>
				<tr><td>scompany</td><td>String</td><td>1-255</td><td>Company data</td></tr>
				<tr><td>sadd</td><td>String</td><td>1-255</td><td>Client street </td></tr>
				<tr><td>scity</td><td>String</td><td>1-255</td><td>Client city</td></tr>
				<tr><td>sstate</td><td>String</td><td>1-255</td><td>Client state</td></tr>
				<tr><td>szip</td><td>String</td><td>1-25</td><td>Client postal code</td></tr>
				<tr><td>scountry</td><td>String</td><td>1-55</td><td>Client country</td></tr>
				<tr><td>sphone</td><td>String</td><td>1-255</td><td>Client phone number</td></tr>
				<tr><td>semail</td><td>String</td><td>1-65</td><td>Client email</td></tr>
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-8 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<h6>ExtraData and other custom params</h6>
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>ExtraData</td><td>String</td><td>0-10240</td><td>Additional information sent by the mechant to the gateway. This data is echo back to the merchant in the reply request</td></tr>
				<tr><td>ExtraData[silenturl]</td><td>URL</td><td>1-255</td><td>Callback URL (server to server POST request)</td></tr>
				<tr><td>ExtraData[successurl]</td><td>URL</td><td>1-255</td><td>URL to redirect client to in case of successfull transaction</td></tr>
				<tr><td>ExtraData[failedurl]</td><td>URL</td><td>1-255</td><td>URL to redirect client to in case of failed transaction</td></tr>
				<tr><td>ExtraData[ep_target]</td><td>String</td><td>4</td><td>"self" for the case of using iframe</td></tr>
				<tr><td>ExtraData[ep_method]</td><td>String</td><td>4</td><td>"post" or "get" for succes/fail redirect</td></tr>
				<tr><td>ExtraData[backtosite]</td><td>URL</td><td>1-255</td><td>URL to redirect client to when clicking back to site button or after 60s on result page</td></tr>
				<tr><td>ExtraData[backtosite_method]</td><td>String</td><td>1-4</td><td>"post" or "get" for the back to site button</td></tr>
				<tr><td>ExtraData[expireurl]</td><td>String</td><td>1-255</td><td>If a timer is set on the payment page you can change the url that the client will be redirected to when the timer reach 0</td></tr>
				<tr><td>ExtraData[rate]</td><td>String</td><td>0-10</td><td>Installments number, format: [bank_code]-[installments_nr]</td></tr>
				<tr><td>ExtraData[filtru_rate]</td><td>String</td><td>0-300</td><td>Installments number, format: [bank_code1]-[i_nr1]-..-[i_nrN],[bank_code2]-[i_nr1]-..-[i_nr2]<br>ex: apb-3-4,btrl-5-6</td></tr>
				<!--<tr><td>ExtraData[test]</td><td>String</td><td>40</td><td>If value is sha1(key+invoice_id) and the used card is 4111 1111 1111 1111 the payment result will simulate a successfull payment</td></tr>-->
				<tr><td>ExtraData[ep_channel]</td><td>String</td><td>0-100</td><td>Filter the available payment channels. Any combinations of the values CC, OP, C2P, MASTERPASS concatenated with comma ","</td></tr>
				<tr><td>generate_epid</td><td>String</td><td>1</td><td>If specified and have value 1, instead of redirecting the client will return a JSON containing the URL of the payment page</td></tr>
				<tr><td>valability</td><td>YYYYMMDDHHmmSS</td><td>14</td><td>Payment link available until the specified timestamp (Romania timezone) Need to be added in the fp_hash after the nonce param</td></tr>
				<tr><td>c2p_id</td><td>String</td><td>1-50</td><td>Unique ID of the client used for C2P wallet, blank values disable the wallet. Need to be added in the fp_hash after the nonce param (and after valability)</td></tr>
				<tr><td>c2p_cid</td><td>Numeric</td><td>1-12</td><td>Unique ID of the enroled cardc used for C2P wallet. Need to be added in the fp_hash after the c2p_id param.</td></tr>
				<tr><td>lang</td><td>String</td><td>2</td><td>Preselect the language of the payment page. Possible values: ro,en,fr,de,it,es,hu. If not sent the language will be chosen based on the client IP</td></tr>
				
								
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-4 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<br>
		In order to use ExtraData[rate] check with an EuPlatesc operator. It will only work if the account is configured to expect it.<br>
		There is an option to display the installments dynamically on the payment page after the customer enter his card number.<br>
		[bank_code] possible values: <br><b>apb</b> (Alpha Bank)<br><b>brdf</b> (BRD Finance)<br><b>btrl</b> (Banca Transilvania)<br><b>pbr</b> (Piraeus Bank/First Bank)<br><b>rzb</b> (Raiffeisen Bank)<br><b>gbr</b> (Garanti Bank)<br>
		[installments_nr] : 1-24<br>
		<br>
		If the dynamic installments is on, you can use ExtraData[filtru_rate] to limit the numbers of installments available to the client.<br>
		You can use "all" instead of the normal format if you want all the installments to be available to the client.
		<!--
		<br><br>
		ExtraData[test] - for example if the key is 00112233445566778899AABBCCDDEEFF and invoice_id is 1234 the value should be d9518b966e77314e1d064755b65d9727b580eba5-->
	</div>
	
</div>


<!-- RASPUNS -->
<div class="row mt-4"><div class="col-12"><h5>EuPlatesc.ro response fields set</h5>
	You need to set the callback URL in the settings page. We will send a server to server POST request after each payment. The succes/fail URL will have the same params but sent trough the client browser.<br>
	We can set to retry the request in case of timeout or if the reponse isn't 200 "OK" plain text.<br><br>
</div></div>
<div class="row">
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>amount</td><td>Numeric</td><td>1-12</td><td>Echo from the request</td></tr>
				<tr><td>curr</td><td>String</td><td>3</td><td>Echo from the request</td></tr>
				<tr><td>invoice_id</td><td>String</td><td>1-27</td><td>Echo from the request</td></tr>
				<tr><td>ep_id</td><td>String</td><td>40</td><td>Gateway unique id for each transaction</td></tr>
				<tr><td>merch_id</td><td>String</td><td>8-50</td><td>Echo from the request</td></tr>
				<tr><td>action</td><td>Numeric</td><td>1</td><td>If 0 – transaction approved else transaction failed</td></tr>
				<tr><td>message</td><td>String</td><td>6</td><td>Response code text message</td></tr>
				<tr><td>approval</td><td>String</td><td>6</td><td>Client bank’s approval code. Can be empty if not provided by gateway</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Merchant transaction timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs2" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt2-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav2-php" aria-controls="nav2-php" aria-selected="true">PHP</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt2-js" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav2-js" aria-controls="nav2-js" aria-selected="false">nodeJS</a>
			</li>
			<li class="nav-item d-none">
				<a class="nav-link" id="navt2-csharp" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav2-csharp" aria-controls="nav2-csharp" aria-selected="false">C#</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt2-java" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav2-java" aria-controls="nav2-java" aria-selected="false">JAVA</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav2-php" role="tabpanel" aria-labelledby="navt2-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$key</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'00112233445566778899AABBCCDDEEFF'</span><span class="token punctuation">;</span>
	
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'amount'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'amount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'curr'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'curr'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'invoice_id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'invoice_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ep_id'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'ep_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'merch_id'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'merch_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'action'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'message'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'approval'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'approval'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'nonce'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sec_status'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'rrn'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'mcard'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'card_exp'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'discount_amount'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'card_type'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'bin'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'rate'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'card_holder'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'rtype'</span><span class="token punctuation">,</span><span class="token single-quoted-string string">'card_hash'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token variable">$param</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">isset</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token variable">$param</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token variable">$param</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token variable">$param</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$fp_hash</span><span class="token operator">=</span><span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token function">trim</span><span class="token punctuation">(</span>@<span class="token variable">$_POST</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span><span class="token operator">===</span><span class="token variable">$fp_hash</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'action'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token double-quoted-string string">"0"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//Complete</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">//Failed</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
	<span class="token comment">//Invalid</span>
<span class="token punctuation">}</span>

<span class="token keyword">echo</span> <span class="token double-quoted-string string">"OK"</span><span class="token punctuation">;</span><span class="token comment">//IMPORTANT to print OK</span></code></pre>
			</div>
			<div class="tab-pane" id="nav2-js" role="tabpanel" aria-labelledby="navt2-js">
				<pre class="m-0 language-js" style="max-height:750px;"><code class=" language-js"><span class="token keyword">var</span> crypto<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'crypto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span>
	<span class="token string">"amount"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'amount'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"curr"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'curr'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"invoice_id"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'invoice_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"ep_id"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'ep_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"merch_id"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'merch_id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"action"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"message"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"approval"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'approval'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"timestamp"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"nonce"</span><span class="token operator">:</span> post_data<span class="token punctuation">[</span><span class="token string">'nonce'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> datakeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> hmac<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>datakeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> binKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> hmacx <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">"md5"</span><span class="token punctuation">,</span> binKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>hmac<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'fp_hash'</span><span class="token punctuation">]</span><span class="token operator">==</span>hmacx<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'action'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">"0"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//Complete</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token comment">//Failed</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
	<span class="token comment">//Invalid</span>
<span class="token punctuation">}</span></code></pre>
			</div>
			<div class="tab-pane" id="nav2-csharp" role="tabpanel" aria-labelledby="navt2-charp">
				<pre class="m-0 language-csharp"><code class=" language-csharp"></code></pre>
			</div>
			<div class="tab-pane" id="nav2-java" role="tabpanel" aria-labelledby="navt2-java">
				<pre class="m-0 language-java" style="max-height:750px;"><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> ep_demo<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> key<span class="token operator">=</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'amount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'curr'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'invoice_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'ep_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'merch_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'message'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'approval'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'timestamp'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'nonce'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> calc_fp_hash<span class="token operator">=</span><span class="token function">fp_hash</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token keyword">if</span><span class="token punctuation">(</span>calc_fp_hash<span class="token operator">==</span>post_data<span class="token punctuation">[</span><span class="token string">'fp_hash'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>post_data<span class="token punctuation">[</span><span class="token string">'action'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string">"0"</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token comment">//Complete</span>
			<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
				<span class="token comment">//Failed</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
			<span class="token comment">//Invalid</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre>
			</div>
		</div>
	</div>
</div>

<!-- ADDITIONAL FIELDS & RECURENTA -->
<div class="row">
	<div class="col-lg-6 col-12">
		<div class="my-4">
			<h5>EuPlatesc.ro additional response fields</h5>You can configure this fields in the MID settings page. <br>
			You need to include them in the fp_hash after nonce param in this exact order only if you enable them.
		</div>
		
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>sec_status</td><td>Numeric</td><td>1</td><td>Additional security info<br><a href="javascript:void(0)" onclick="new_alert(&#39;sec_status IPN type&#39;,&#39;&lt;table class=\&#39;table table-striped\&#39;&gt;&lt;thead class=\&#39;thead-dark text-center\&#39;&gt;&lt;tr&gt;&lt;th scope=\&#39;col\&#39; class=\&#39;align-middle\&#39;&gt;Field name&lt;/th&gt;&lt;th scope=\&#39;col\&#39; class=\&#39;align-middle\&#39;&gt;Format&lt;/th&gt;&lt;th scope=\&#39;col\&#39; class=\&#39;align-middle\&#39;&gt;Length&lt;/th&gt;&lt;th scope=\&#39;col\&#39; class=\&#39;align-middle\&#39;&gt;Description&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;cart_id&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;40&lt;/td&gt;&lt;td&gt;It is an alias for ep_id&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;mid&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;8-50&lt;/td&gt;&lt;td&gt;Merchant ID assigned by EuPlatesc.ro&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;sec_status&lt;/td&gt;&lt;td&gt;Numeric&lt;/td&gt;&lt;td&gt;2&lt;/td&gt;&lt;td&gt;3 or 4 - Pending verification&lt;br&gt;5 or 6 - Fraud&lt;br&gt;8 or 9 - Safe&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;type&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;10&lt;/td&gt;&lt;td&gt;It will have the value sec_status&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;timestamp&lt;/td&gt;&lt;td&gt;YYYYMMDDHHmmSS&lt;/td&gt;&lt;td&gt;14&lt;/td&gt;&lt;td&gt;Merchant transaction timestamp in GMT&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;invoice_id&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;1-27&lt;/td&gt;&lt;td&gt;Merchant order ID&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;nonce&lt;/td&gt;&lt;td&gt;Numeric&lt;/td&gt;&lt;td&gt;16-64&lt;/td&gt;&lt;td&gt;Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;fp_hash&lt;/td&gt;&lt;td&gt;String&lt;/td&gt;&lt;td&gt;1-256&lt;/td&gt;&lt;td&gt;Merchant MAC in hexadecimal form&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&#39;,&#39;green&#39;,null,&#39;large&#39;)">Click for more</a></td></tr>
				<tr><td>rrn</td><td>Numeric</td><td>12</td><td>Code generated by bank on customer's bank statement</td></tr>
				<tr><td>mcard</td><td>Numeric</td><td>4</td><td>Last 4 digits of the used card</td></tr>
				<tr><td>card_exp</td><td>Numeric</td><td>4</td><td>Expiration dat of the used card, format: YYmm</td></tr>
				<tr><td>discount_amount</td><td>Numeric</td><td>0-12</td><td>Applied discount</td></tr>
				<tr><td>card_type</td><td>String</td><td>0-16</td><td>Visa, Mastercard, Maestro</td></tr>
				<tr><td>bin</td><td>Numeric</td><td>6</td><td>First 6 digits of the used card</td></tr>
				<tr><td>rate</td><td>String</td><td>16</td><td>Installments number, Format: X rate BANK, ex: 6 rate BTRL</td></tr>
				<tr><td>card_holder</td><td>String</td><td>1-64</td><td>Name on the used card</td></tr>
				<tr><td>email</td><td>String</td><td>1-65</td><td>Email of the customer</td></tr>
				<tr><td>rtype</td><td>String</td><td>1-8</td><td>Transaction type: Normal, Base, Recurent</td></tr>
				<tr><td>card_hash</td><td>String</td><td>64</td><td>Unique id of the PAN</td></tr>
			</tbody>
		</table>
	</div>
	
	<div class="col-lg-6 col-12">
		<div class="my-4">
			<h5>Recurring transaction processing</h5>
			
			Recurring transactions are splitted into two parts:<br>
			- initial transaction – recurent value is <b>"Base"</b> <br>
			<br>
			<h6>Additional fields</h6>
			<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>recurent_freq</td><td>Numeric</td><td>2</td><td>Value in days max 255, included in fp_hash after nonce</td></tr>
				<tr><td>recurent_exp</td><td>Numeric</td><td>8</td><td>YYYYmmdd, included in fp_hash after recurent_freq</td></tr>
				<tr><td>recurent</td><td>String</td><td>1-8</td><td>"Base" - initial transaction<br>"Recurent" - subsecquent transactions<br>"Recurent2CIT" - 3Dsecure transaction<br>not included in fp_hash</td></tr>
			</tbody>
		</table>
			
			<br>
			- subsecquent recurring transactions - recurent value is <b>"Recurent"</b><br>
			- the client will not enter the card details and will see directly the 3DSecure page - recurent value is <b>"Recurent2CIT"</b><br>
			<br>
			The merchant account can be configured to leave the monthly initiation of the recurring transaction on the EuPlatesc cron jobs
			else, in case of "Recurent" message, the merchant must send also: <br><br>
			<b>baseEPID</b> - the "ep_id" of the initial "Base" transction (included in fp_hash before amount param) <br>
			All the other fields from the general message structure must be sent for successfully transaction processing. 
			The request must be POST and will be made <b>server to server</b> without the client intervention, at the same endpoint.
			In order to process recurring transctions, euplatesc.ro system must be configured in advance
		</div>
		
	</div>
</div>

<!-- RECURENTA PAYLOAD -->
<div class="row">	
	<div class="col-lg-6 col-12">
		<div class="col-12"><h5>Base Transaction Payload</h5></div>
		<ul class="nav nav-tabs" id="nav-docs3" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt3-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav3-php" aria-controls="nav3-php" aria-selected="true">PHP</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt3-js" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav3-js" aria-controls="nav3-js" aria-selected="false">nodeJS</a>
			</li>
			<li class="nav-item d-none">
				<a class="nav-link" id="navt3-csharp" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav3-csharp" aria-controls="nav3-csharp" aria-selected="false">C#</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt3-java" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav3-java" aria-controls="nav3-java" aria-selected="false">JAVA</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav3-php" role="tabpanel" aria-labelledby="navt3-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'amount'</span>      	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'1.00'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'curr'</span>        	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'RON'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'invoice_id'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'123'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'order_desc'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Initial payment'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'merch_id'</span>    	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$mid</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'nonce'</span>       	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'recurent_freq'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'28'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'recurent_exp'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'20200625'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'recurent'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Base'</span><span class="token punctuation">;</span></code></pre>
			</div>
			<div class="tab-pane" id="nav3-js" role="tabpanel" aria-labelledby="navt3-js">
				<pre class="m-0 language-js"><code class=" language-js"><span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span>
		<span class="token string">"amount"</span><span class="token operator">:</span><span class="token string">"1.00"</span><span class="token punctuation">,</span>
		<span class="token string">"curr"</span><span class="token operator">:</span><span class="token string">"RON"</span><span class="token punctuation">,</span>
		<span class="token string">"invoice_id"</span><span class="token operator">:</span><span class="token string">"123"</span><span class="token punctuation">,</span>
		<span class="token string">"order_desc"</span><span class="token operator">:</span><span class="token string">"Initial payment"</span><span class="token punctuation">,</span>
		<span class="token string">"merch_id"</span><span class="token operator">:</span><span class="token string">"testaccount"</span><span class="token punctuation">,</span>
		<span class="token string">"timestamp"</span><span class="token operator">:</span><span class="token string">"20181205105150"</span><span class="token punctuation">,</span>
		<span class="token string">"nonce"</span><span class="token operator">:</span><span class="token string">"522d2594b9d65b850aa01dfc4914ea14"</span><span class="token punctuation">,</span>
		<span class="token string">"recurent_freq"</span><span class="token operator">:</span><span class="token string">"28"</span><span class="token punctuation">,</span>
		<span class="token string">"recurent_exp"</span><span class="token operator">:</span><span class="token string">"20200625"</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> datakeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> hmac<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>datakeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> binKey <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> hmacx <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">"md5"</span><span class="token punctuation">,</span> binKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>hmac<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token string">"fp_hash"</span><span class="token punctuation">]</span><span class="token operator">=</span>hmacx<span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token string">"recurent"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"Base"</span><span class="token punctuation">;</span>
</code></pre>
			</div>
			<div class="tab-pane" id="nav3-csharp" role="tabpanel" aria-labelledby="navt3-charp">
				<pre class="m-0 language-csharp"><code class=" language-csharp"></code></pre>
			</div>
			<div class="tab-pane" id="nav3-java" role="tabpanel" aria-labelledby="navt3-java">
				<pre class="m-0 language-java"><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> ep_demo<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> mid<span class="token operator">=</span><span class="token string">"testaccount"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> key<span class="token operator">=</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dateString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmmss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"1.00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"RON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Initial payment"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">nonceGen</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"28"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"20200625"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">fp_hash</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//add recurent=Base to form</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre>
			</div>
		</div>
	</div>

	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<div class="col-12"><h5>Recurent Transaction Payload</h5></div>
		<ul class="nav nav-tabs" id="nav-docs4" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt4-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav4-php" aria-controls="nav4-php" aria-selected="true">PHP</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt4-js" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav4-js" aria-controls="nav4-js" aria-selected="false">nodeJS</a>
			</li>
			<li class="nav-item d-none">
				<a class="nav-link" id="navt4-csharp" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav4-csharp" aria-controls="nav4-csharp" aria-selected="false">C#</a>
			</li>
			<li class="nav-item">
				<a class="nav-link" id="navt4-java" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav4-java" aria-controls="nav4-java" aria-selected="false">JAVA</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav4-php" role="tabpanel" aria-labelledby="navt4-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'baseEPID'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'AABBCCDDEE....BBCCDDEEFFAABB'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'amount'</span>      	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'1.00'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'curr'</span>        	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'RON'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'invoice_id'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'123'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'order_desc'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Recurent payment'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'merch_id'</span>    	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$mid</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
	<span class="token single-quoted-string string">'nonce'</span>       	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span> 

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'recurent'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Recurent'</span><span class="token punctuation">;</span>
 </code></pre>
			</div>
			<div class="tab-pane" id="nav4-js" role="tabpanel" aria-labelledby="navt4-js">
				<pre class="m-0 language-js"><code class=" language-js"><span class="token keyword">var</span> data<span class="token operator">=</span><span class="token punctuation">{</span>
		<span class="token string">"baseEPID"</span><span class="token operator">:</span><span class="token string">"AABBCCDDEE....BBCCDDEEFFAABB"</span><span class="token punctuation">,</span>
		<span class="token string">"amount"</span><span class="token operator">:</span><span class="token string">"1.00"</span><span class="token punctuation">,</span>
		<span class="token string">"curr"</span><span class="token operator">:</span><span class="token string">"RON"</span><span class="token punctuation">,</span>
		<span class="token string">"invoice_id"</span><span class="token operator">:</span><span class="token string">"123"</span><span class="token punctuation">,</span>
		<span class="token string">"order_desc"</span><span class="token operator">:</span><span class="token string">"Recurent payment"</span><span class="token punctuation">,</span>
		<span class="token string">"merch_id"</span><span class="token operator">:</span><span class="token string">"testaccount"</span><span class="token punctuation">,</span>
		<span class="token string">"timestamp"</span><span class="token operator">:</span><span class="token string">"20181205105150"</span><span class="token punctuation">,</span>
		<span class="token string">"nonce"</span><span class="token operator">:</span><span class="token string">"522d2594b9d65b850aa01dfc4914ea14"</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> datakeys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
	
<span class="token keyword">var</span> hmac<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">;</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>datakeys<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		hmac <span class="token operator">+=</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">+</span> data<span class="token punctuation">[</span>datakeys<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> binKey <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Buffer</span><span class="token punctuation">(</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">,</span> <span class="token string">"hex"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> hmacx <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">createHmac</span><span class="token punctuation">(</span><span class="token string">"md5"</span><span class="token punctuation">,</span> binKey<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>hmac<span class="token punctuation">,</span> <span class="token string">'utf8'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">digest</span><span class="token punctuation">(</span><span class="token string">'hex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token string">"fp_hash"</span><span class="token punctuation">]</span><span class="token operator">=</span>hmacx<span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token string">"recurent"</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">"Recurent"</span><span class="token punctuation">;</span></code></pre>
			</div>
			<div class="tab-pane" id="nav4-csharp" role="tabpanel" aria-labelledby="navt4-charp">
				<pre class="m-0 language-csharp"><code class=" language-csharp"></code></pre>
			</div>
			<div class="tab-pane" id="nav4-java" role="tabpanel" aria-labelledby="navt4-java">
				<pre class="m-0 language-java"><code class=" language-java"><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>security<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">javax<span class="token punctuation">.</span>crypto<span class="token punctuation">.</span>spec<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>text<span class="token punctuation">.</span></span><span class="token operator">*</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> ep_demo<span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>args<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">String</span> mid<span class="token operator">=</span><span class="token string">"testaccount"</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> key<span class="token operator">=</span><span class="token string">"00112233445566778899AABBCCDDEEFF"</span><span class="token punctuation">;</span>
        
        <span class="token class-name">Date</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> dateString <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">"yyyyMMddHHmmss"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ArrayList</span> s<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"AABBCCDDEE....BBCCDDEEFFAABB"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"1.00"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"RON"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"123"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"Recurent payment"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span><span class="token punctuation">;</span>  
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>dateString<span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">nonceGen</span><span class="token punctuation">(</span><span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"28"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">"20200625"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">fp_hash</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">//add recurent=Recurent to form</span>
    <span class="token punctuation">}</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span></code></pre>
			</div>
		</div>
	</div>
</div>

<!-- Test cards -->

<div class="row mb-4" id="testcards">
	<div class="col-lg-12 col-12">
		<div class="my-4">
			<h5>Test cards</h5>You can use this card only if the account is on test state
		</div>
		
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Card number</th>
					<th scope="col" class="align-middle">Card expire date</th>
					<th scope="col" class="align-middle">Card CVC</th>
					<th scope="col" class="align-middle">Card Name</th>
					<th scope="col" class="align-middle">Result message</th>
				</tr>
			</thead>
			<tbody>
				 
				<tr>
					<td>4111111111111111</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Authentication failed</td>
				</tr>
				 
				<tr>
					<td>4444333322221111</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Not sufficient funds</td>
				</tr>
				 
				<tr>
					<td>4000020000000000</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Transaction declined</td>
				</tr>
				 
				<tr>
					<td>4400000000000008</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Expired card</td>
				</tr>
				 
				<tr>
					<td>4607000000000009</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Invalid response</td>
				</tr>
				 
				<tr>
					<td>4000640000000005</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Approved</td>
				</tr>
				 
				<tr>
					<td>5454545454545454</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Authentication failed</td>
				</tr>
				 
				<tr>
					<td>5555555555554444</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Not sufficient funds</td>
				</tr>
				 
				<tr>
					<td>2222400010000008</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Transaction declined</td>
				</tr>
				 
				<tr>
					<td>2222400030000004</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Expired card</td>
				</tr>
				 
				<tr>
					<td>5100060000000002</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Invalid response</td>
				</tr>
				 
				<tr>
					<td>5500000000000004</td>
					<td>24/01</td>
					<td>123</td>
					<td>Test</td>
					<td>Approved</td>
				</tr>
							</tbody>
		</table>
	</div>
</div>
	
	
<!-- WEBSERVICES -->

<div class="row my-4">
	<div class="col-12">
		<h4>WebServices</h4><br>
		<h6>EndPoint: https://manager.euplatesc.ro/v3/?action=ws</h6>
	</div>
</div>

<div class="row my-2">
	<div class="col-12"><h5>Get status of transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: check_status</td></tr>
				<tr><td>mid</td><td>String</td><td>13</td><td>MerchantID: 4484xxxxxxxxx</td></tr>
				<tr><td>epid</td><td>String</td><td>40</td><td>The EPID of the transaction</td></tr>
				<tr><td>invoice_id</td><td>String</td><td>1-27</td><td>Merchant order ID (if used, the epid should not be sent, also return max. 40 transactions if more have the same id)</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs5" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt5-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav5-php" aria-controls="nav5-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav5-php" role="tabpanel" aria-labelledby="navt5-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$key</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"check_status"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"4484xxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token comment">//'invoice_id'=&gt; "00000",</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"[{"merch_id":"4484xxxxxxxxx","invoice_id":"00000","ep_id":"0000000000000000000000000000000000000000","action":"0","message":"Approved","captured":"0","refunded":"0","masked_card":"444444xxxxxx4444","card_expire":"mm-yy","name_on_card":"Test","email":"test@test.com","timestamp":"2014-11-26 10:11:48","tran_type":"Normal","recurent_exp":"","recurent_cancel_date":""}]}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>

<div class="row my-2">
	<div class="col-12"><h5>Capture or reversal the transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: capture / reversal</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>epid</td><td>String</td><td>40</td><td>The EPID of the transaction</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs6" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt6-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav6-php" aria-controls="nav6-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav6-php" role="tabpanel" aria-labelledby="navt6-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"capture"</span><span class="token punctuation">,</span><span class="token comment">//or reversal</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"1"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Partial capture the transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: partial_capture</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>amount</td><td>Numeric</td><td>1-12</td><td>Capture amount in float format with decimal point (thousand separator not allowed). Ex: 1234.56</td></tr><tr><td>epid</td><td>String</td><td>40</td><td>The EPID of the transaction</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs12" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt12-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav12-php" aria-controls="nav12-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav12-php" role="tabpanel" aria-labelledby="navt12-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"partial_capture"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'amount'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"123.45"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"1"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Refund or partial refund the transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: refund</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>amount</td><td>Numeric</td><td>1-12</td><td>Refunded amount in float format with decimal point (thousand separator not allowed). Ex: 1234.56</td></tr>
				<tr><td>reason</td><td>String</td><td>5-55</td><td>Short description of the reason of the refund</td></tr>
				<tr><td>epid</td><td>String</td><td>40</td><td>The EPID of the transaction</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs7" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt7-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav7-php" aria-controls="nav7-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav7-php" role="tabpanel" aria-labelledby="navt7-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"refund"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'amount'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"123.45"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'reason'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"product not in stock"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"1"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Cancel recurring transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: cancel_recurring</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>epid</td><td>String</td><td>40</td><td>The baseEPID of the transaction or any EPID of the folowing transactions</td></tr>
				<tr><td>reason</td><td>String</td><td>0-55</td><td>Short description of the reason</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs8" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt8-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav8-php" aria-controls="nav8-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav8-php" role="tabpanel" aria-labelledby="navt8-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"cancel_recurring"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'reason'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"client requested"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy"} - returning the baseEPID</span>
</code></pre>
			</div>
		</div>
	</div>
</div>




<div class="row my-2">
	<div class="col-12"><h5>Update invoice_id of transaction</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: update_iid</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>epid</td><td>String</td><td>40</td><td>The EPID of the transaction</td></tr>
				<tr><td>invoice_id</td><td>String</td><td>1-27</td><td>The updated invoice_id of the transaction</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs9" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt9-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav9-php" aria-controls="nav9-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav9-php" role="tabpanel" aria-labelledby="navt9-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"update_iid"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'epid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"0000000000000000000000000000000000000000"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'invoice_id'</span><span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"123123"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"1"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Get invoices list (only if the invoices are issued by EuPlatesc)</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: invoices</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>mid</td><td>String</td><td>13</td><td>MerchantID: 4484xxxxxxxxx</td></tr>
				<tr><td>from</td><td>String</td><td>10</td><td>Date: YYYY-mm-dd (if from and to are sent empty will search in last 3 months)</td></tr>
				<tr><td>to</td><td>String</td><td>10</td><td>Date: YYYY-mm-dd</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs10" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt10-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav10-php" aria-controls="nav10-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav10-php" role="tabpanel" aria-labelledby="navt10-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"invoices"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"4484xxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'from'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">""</span><span class="token punctuation">,</span><span class="token comment">//it will search in </span>
	<span class="token single-quoted-string string">'to'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">""</span><span class="token punctuation">,</span><span class="token comment">//past 3 months if both empty</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":[{"invoice_number":"","invoice_date":"","invoice_amount_novat":"","invoice_amount_vat":"","invoice_currency":"","transactions_number":"","transactions_amount":"","transferred_amount":""}]} - max 100 records</span>


</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Get invoice transactions list</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: invoice</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>invoice</td><td>String</td><td>11</td><td>FPSxxxxxxxx invoice_number</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs11" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt11-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav11-php" aria-controls="nav11-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav11-php" role="tabpanel" aria-labelledby="navt11-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"invoice"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'invoice'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"FPSxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">/*
{"success":[
{"mid":"xxxxxxxxxxx","invoice_id":"xxxxx","epid":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","rrn":"xxxxxxxxxxxx","amount":"xxx.xx","currency":"xxx","commission":"xx.xx","installments":"xxx","type":"capture"},
{"mid":"xxxxxxxxxxx","invoice_id":"xxxxx","epid":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","rrn":"xxxxxxxxxxxx","amount":"xxx.xx","currency":"xxx","commission":"xx.xx","installments":"xxx","type":"refund"},
{"mid":"xxxxxxxxxxx","invoice_id":"xxxxx","epid":"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx","rrn":"xxxxxxxxxxxx","amount":"xxx.xx","currency":"xxx","commission":"xx.xx","installments":"xxx","type":"chargeback"},
]}
*/</span>


</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Get captured total</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: captured_total</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>mids</td><td>String</td><td>11</td><td>MerchantIDs (separated by comma ",")</td></tr>
				<tr><td>from</td><td>String</td><td>10</td><td>Date: YYYY-mm-dd (if from and to are sent empty will search in last 1 month)</td></tr>
				<tr><td>to</td><td>String</td><td>10</td><td>Date: YYYY-mm-dd</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs12" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt12-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav12-php" aria-controls="nav12-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav12-php" role="tabpanel" aria-labelledby="navt12-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"captured_total"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"4484xxxxxxxxx,4484xxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'from'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">""</span><span class="token punctuation">,</span><span class="token comment">//it will search in </span>
	<span class="token single-quoted-string string">'to'</span>		<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">""</span><span class="token punctuation">,</span><span class="token comment">//past 1 month if both empty</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":{"EUR":"xxx","GBP":"xxx","RON":"xxx","USD":"xxx"}}</span>

</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Get cardart data</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: cardart</td></tr>
				<tr><td>ukey</td><td>String</td><td>1-8</td><td>User key: xxxxx</td></tr>
				<tr><td>ep_id</td><td>String</td><td>40</td><td>EPID of the Base transaction</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form, <b>the key used is not the merchant KEY but UAPI (see user settings)</b></td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs13" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt13-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav13-php" aria-controls="nav13-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav13-php" role="tabpanel" aria-labelledby="navt13-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$uapi</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"cardart"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ukey'</span>       <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'ep_id'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"9A75ADAF1834BC36478DD5AC918DB8C974DD384E"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$uapi</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
curl_close <span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"bin":"4xxxxx","last4":"xxxx","exp":"yymm","cardart":"*BASE64 ENCODED IMAGE*"}</span>

</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-2">
	<div class="col-12"><h5>Get saved cards list</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: c2p_cards</td></tr>
				<tr><td>mid</td><td>String</td><td>11</td><td>MerchantID</td></tr>
				<tr><td>c2p_id</td><td>String</td><td>1-50</td><td>Unique ID of the client</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs15" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt15-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav15-php" aria-controls="nav15-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav15-php" role="tabpanel" aria-labelledby="navt15-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$key</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"c2p_cards"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'c2p_id'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"1"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"cards":[{"id":"xxxxxx","bin":"479032","last4":"4512","mask":"479032xxxxxx4512","exp":"23-10","cardart":"https:\/\/secure.euplatesc.ro\/tdsprocess\/images\/ca8_small\/1698962c052c3c6e40468363636304b23070222638c5f7071d415372b5119ba6.jpg"}]}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>



<div class="row my-2">
	<div class="col-12"><h5>Delete saved card</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: c2p_delete</td></tr>
				<tr><td>mid</td><td>String</td><td>11</td><td>MerchantID</td></tr>
				<tr><td>c2p_id</td><td>String</td><td>1-25</td><td>Unique ID of the client</td></tr>
				<tr><td>c2p_cid</td><td>String</td><td>1-10</td><td>Unique ID of the saved card</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs16" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt16-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav16-php" aria-controls="nav16-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav16-php" role="tabpanel" aria-labelledby="navt16-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$key</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"c2p_delete"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'c2p_id'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"1"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'c2p_cid'</span>   <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"success":"1"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>

<div class="row my-2">
	<div class="col-12"><h5>Check MID</h5></div>
	<div class="col-lg-6 col-12">
		<table class="table table-striped">
			<thead class="thead-dark text-center">
				<tr>
					<th scope="col" class="align-middle">Field name</th>
					<th scope="col" class="align-middle">Format</th>
					<th scope="col" class="align-middle">Length</th>
					<th scope="col" class="align-middle">Description</th>
				</tr>
			</thead>
			<tbody>
				<tr><td>method</td><td>String</td><td>fixed</td><td>Value: check_mid</td></tr>
				<tr><td>mid</td><td>String</td><td>11</td><td>MerchantID</td></tr>
				<tr><td>timestamp</td><td>YYYYMMDD HHmmSS</td><td>14</td><td>Current timestamp in GMT: 20221107143859</td></tr>
				<tr><td>nonce</td><td>String</td><td>16-64</td><td>Merchant nonce. Must be filled with unpredictable random bytes in hexadecimal format</td></tr>
				<tr><td>fp_hash</td><td>String</td><td>1-256</td><td>Merchant MAC in hexadecimal form</td></tr>
			</tbody>
		</table>
	</div>
	<div class="col-lg-6 col-12 mt-4 mt-lg-0 px-0 px-lg-3">
		<ul class="nav nav-tabs" id="nav-docs17" role="tablist">
			<li class="nav-item">
				<a class="nav-link active" id="navt17-php" data-toggle="tab" role="tab" href="https://manager.euplatesc.ro/v3/?page=docs#nav17-php" aria-controls="nav17-php" aria-selected="true">PHP</a>
			</li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane show active" id="nav17-php" role="tabpanel" aria-labelledby="navt17-php">
				<pre class="m-0 language-php"><code class=" language-php"><span class="token variable">$key</span><span class="token operator">=</span><span class="token double-quoted-string string">"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"</span><span class="token punctuation">;</span>
<span class="token variable">$data</span> <span class="token operator">=</span>  <span class="token keyword">array</span> <span class="token punctuation">(</span>
	<span class="token single-quoted-string string">'method'</span>  	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"check_mid"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'mid'</span>     	<span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">"xxxxxxxxxxx"</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'timestamp'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'YmdHis'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'nonce'</span>     <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'fp_hash'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token function">euplatesc_mac</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span><span class="token double-quoted-string string">"https://manager.euplatesc.ro/v3/index.php?action=ws"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$server_output</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//{"error":"Error message goes here"}</span>
<span class="token comment">//{"name":"...","url":"...","cui":"...","j":"...","status":"test/live","recuring":"N/Y/YA","tpl":"tpl-v15/tpl-v17/tpl-v21","rate_mode":"C/EP","rate_apb":"6;12","rate_btrl":"2;3;4;5;6","rate_brdf":"3;6","rate_fbr":"2;3;4","rate_gbr":"","rate_rzb":"2;3;4;5;6;7;8;9;10;11;12;15;18;20;24"}</span>
</code></pre>
			</div>
		</div>
	</div>
</div>


<div class="row my-4">
	<div class="col-12 col-lg-6"><h5>Diagram using generate_epid param</h5>
	<img src="./manager.euplatesc.ro_files/diagram2.png" class="m-auto d-block"></div>

	<div class="col-12 col-lg-6"><h5>Diagram using without generate_epid param</h5>
	<img src="./manager.euplatesc.ro_files/diagram1.png" class="m-auto d-block"></div>
</div>

<br><br>
	</div>
		
</body></html>